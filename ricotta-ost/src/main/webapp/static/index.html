<!DOCTYPE html>
<!--
    Copyright 2011, 2012 Ola SandstrÃ¶m.

    This file is part of Ricotta.

    Ricotta is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Ricotta is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Ricotta.  If not, see <http://www.gnu.org/licenses/>.
-->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Ricotta</title>
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="css/DT_bootstrap.css" rel="stylesheet" media="screen">
        <link href="css/jquery.lightbox-0.5.css" rel="stylesheet"/>
        <link type="text/css" href="ricotta.custom.css" rel="stylesheet" />
        
        <!-- 
        <link type="text/css" href="css/blitzer/jquery-ui-1.8.17.custom.css" rel="stylesheet" />
         -->	
    </head>
    <body>
    	<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="navbar-inner">
        		<div class="container-fluid">
          			<a class="brand" href="javascript:home();"><img title="" src="img/Ricotta_assets/ricotta_white.png"></a>
          			<div class="nav-collapse collapse">
           				<ul class="nav navbar-text pull-right" id="headerUser">
           					<li><a id="headerUserAction" class="login" href="" >Login</a></li>
           					<li class="dropdown">
		         				<a class="dropdown-toggle" data-toggle="dropdown"><span class="icon-white icon-user"></span> <span id="headerUsername"></span> <b class="caret"></b></a>
		         				<ul class="dropdown-menu">
		         					<li class="active" data-target="projects"><a>Projects</a></li>
									<li data-target="templates"><a>Templates</a></li>
									<li data-target="languages"><a>Languages</a></li>
		         					<li class="divider"></li>
			         				<li><a id="headerUserAction" href="" >Logout</a></li>
		         				</ul>
           					</li>
           				</ul>
          			</div>
        		</div>
      		</div>
		</div>
	    <div class="container-fluid">
	    	<div id="ricotta_contents">
	    		<div id="toast"></div>
	    		<div id="welcome">
		    		
		    		
                        <br><br><br><br>
                        <div style="text-align: center;">
                        
                        <table align="center">
                            <tbody>
                                <tr><td colspan="5"><img title="" src="img/Ricotta_assets/ricotta_black.png"></td></tr>
                                <tr>
                                    <td style="padding:50px"><img title="" src="img/Ricotta_assets/icon_setup.png"><br><br><b>Setup a project</b></td>
                                    <td style="padding:50px"><img title="" src="img/Ricotta_assets/arrow.png"></td>
                                    <td style="padding:50px"><img title="" src="img/Ricotta_assets/icon_translate.png"><br><br><b>Translate</b></td>
                                    <td style="padding:50px"><img src="img/Ricotta_assets/arrow.png" title=""></td>
                                    <td style="padding:50px"><img src="img/Ricotta_assets/icon_export.png" title=""><br><br><b>Export to the desired platform</b></td>
                                </tr>
                                
                                <tr>
                                    <td style="padding:50px; vertical-align: top;">
                                        <b>Localization Management</b><br>
                                        Ricotta is a web based<br>
                                        translation management<br>
                                        too, with complimentary<br>
                                        build tools, to efficiently<br>
                                        manage localized resources<br>
                                        in your software project.
                                    </td>
                                    
                                    <td style="padding:50px"></td>
                                    
                                    <td style="padding:50px; vertical-align: top;">
                                        <b>Translation and Roles</b><br>
                                        Ricotta enables admin to <br>
                                        set different roles for the users.<br>
                                        With these different levels of <br>
                                        access it is easy to assign a <br>
                                        user to a specific tasks.<br>
                                        User your Google account <br>
                                        to sign in.
                                    </td>
                                    
                                    <td style="padding:50px"></td>
                                    
                                    <td style="padding:50px; vertical-align: top;">
                                        <b>Export Translation</b><br>
                                        There are two different ways<br> 
                                        to export the translation, <br>
                                        manually or with help of <br>
                                        the Maven Plug-in
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td style="padding:50px; text-align:right;" colspan="3" id="logoContent"></td>
                                    <td style="padding:50px; text-align:right;" colspan="2">For more info press <a onclick="$('#ricotta_contents').load('info.html');">here<a></a></td>
                                </tr>
                                
                                
                            </tbody>
                        </table>
                    </div>

                    
                    <!-- 
                    
                    <div>
                        Ricotta is a translation management tool, with complimentary build tools, to efficiently manage localised resources in your software project.
                        Manage translation of apps, websites and documents better.
                    </div>
                    <div id="footer">
                        <p>
                            a powerful solution for managing localization from start to finish.
                        </p>
                    </div>
                    
                    -->
		    		
	    		</div>
	    	</div>
			
    	</div><!--/.fluid-container-->
    	<!-- 
    	<footer class="footer">
		  	<div>Ricotta translations management tool.</div>
		  	<div>For Ricotta, the GNU General Public License version 3 applies, <a href="/LICENSE">GPLv3</a>.</div>
		</footer>  -->
		<!--       	
        <div id="contents" class="ui-widget"></div> -->
        <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/jquery.dataTables.js"></script>
        <script type="text/javascript" src="js/DT_bootstrap.js"></script>
        <script type="text/javascript" src="js/jquery.iframe-post-form.js"></script>
		<script type="text/javascript" src="js/jquery.lightbox-0.5.min.js"></script>
		<script type="text/javascript" src="ricotta_common.js"></script>
		<script type="text/javascript" src="ricotta_API.js"></script>
        <script type="text/javascript">
			$.ajaxSetup({
			    cache: false,
			    data: null,
			    async: true
			});
			var ajaxCalled = null;
			function home() {
				if(typeof dataObject !== 'undefined') {
					if(dataObject.tokenTable != null) {
						dataObject.tokenTable.fnClearTable();
						dataObject.tokenTable.fnDestroy();
					}
					arrayProjects = dataObject.projects;
					delete dataObject; 
					
					$(".project").remove();
					loadPage('projects');
				}
				else {
					document.location = "index.html";
				}
			}
			function showToast(s) {
			    $("#toast").text(s).show();
			}
			
			function hideToast() {
			    $("#toast").text("").hide();
			}
			
			$(document).ready(function() {
			    showToast("Checking login status...");
			    ricottaAPI.me(success, fail);
			    
			    //load logo
			    $("#logoContent").html("<div>Loading logo...</div>").load("logo.html");
			});
			
			function success(data) {
				$("#headerUser").data("json", data);
			    $("#headerUsername").text(data.email);
			    $(".dropdown-menu #headerUserAction").attr("href", data.url);
			    hideToast();
			    delete data;
			    $("#ricotta_contents").html("<div style='width:100%;text-align:center;'>Loading...</div>").load("home.html");
			    $(".pull-right #headerUserAction:first").hide();
			    $(".dropdown-menu li").live("click", function(){
			    	var page = $(this).data("target");//get the link page
			    	setActiveMenu($(".pull-right .dropdown-menu"), $(this));
			    	$(".project").remove();
			    	loadPage(page);
			    });
			}
			
			function fail(jqXHR) {
				$(".dropdown").hide();
				hideToast();
				
				//window.location.href= jqXHR.getResponseHeader("Login-Logout-URL");
				
			    //$("#headerUsername").text("Anonymous");
			    $(".pull-right #headerUserAction:first").attr("href", jqXHR.getResponseHeader("Login-Logout-URL"));
			    //$("#contents").html('<img src="/RicottaOverview.2.png" alt="Ricotta Overview" />');
			    //$("#ricotta_contents").append('<img src="/RicottaOverview.2.png" alt="Ricotta Overview" />');
			    
			}
			
			
			$(".dropdown-menu #headerUserAction").click(function(event) {
				var logoutHref = $(this).attr('href');
				//pause fire click event
				event.preventDefault();
				$('.projects').remove();
				$.ajax({
                    type: "GET",
                    url: "/api/me/v10/logout",
                    success: function(data) {
                    	//continue fire click event
                    	document.location.href=logoutHref;
                    	delete logoutHref;
                    }
                });
			});
			
			
			//click on home link
			$("#headerHome").click(function() {
			    document.location = "index.html";
			});
			//click on project's name
			$("#headerProject").click(function() {
				$("#contents").empty();
				$("#ricotta_contents").html("<div style='width:100%;text-align:center;'>Loading...</div>").load("project.html");
			});
			
        </script>
    </body>
</html>
