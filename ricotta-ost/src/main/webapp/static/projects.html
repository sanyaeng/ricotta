<table id="projects" class="ui-widget ui-widget-content">
    <thead class="ui-widget-header">
        <tr>
            <th>Name</th><th>Owner</th>
        </tr>
    </thead>
    <tbody id="projectsBody"></tbody>
    <tfoot>
<!--        <tr>
            <td colspan="2"><button id="createProjectButton" >Create new project...</button></td>
        </tr>-->
    </tfoot>
</table>
<button id="createProjectButton" >Create new project...</button>
<script type="text/javascript">

function loadProject(projectName) {
    // copy json from table to header
    var p = $("#projectTR" + projectName).data("json");
    $("#headerProject").data("project", p);
    
    // load project contents
    $("#contents").load("project.html");
}

$(function() {
    // clear project name
    $("#headerProject").text("");
    
    $("#createProjectButton").button().click(function() {
        
    });
    
    $.ajax({
        async: false,
        type: "GET",
        url: "/api/project/v10",
        dataType: "json",
        success: function(data){
            $.map(data, function(p, i) {
                $("#projectsBody")
                .append("<tr id=\"projectTR" + p.name + "\">")
                .append("<td class=\"ui-state-default\" onClick=\"loadProject('" + p.name + "');\">" + p.name + "</td>")
                .append("<td>" + p.owner + "</td>")
                .append("</tr>");
                $("#projectTR" + p.name).data("json", p);
//                $("#projectsTotal").text(i+1);
            });
        },
        error: function(req, textStatus, errorThrown) {}
    });        
});
</script>

